"use strict";var K=Object.defineProperty;var ze=Object.getOwnPropertyDescriptor;var Ce=Object.getOwnPropertyNames;var je=Object.prototype.hasOwnProperty;var Ge=(t,e)=>{for(var r in e)K(t,r,{get:e[r],enumerable:!0})},ve=(t,e,r,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Ce(e))!je.call(t,n)&&n!==r&&K(t,n,{get:()=>e[n],enumerable:!(o=ze(e,n))||o.enumerable});return t};var Ke=t=>ve(K({},"__esModule",{value:!0}),t);var dt={};Ge(dt,{BoolRules:()=>$e,BytesRules:()=>Je,DoubleRules:()=>Re,EnumRules:()=>Pe,FieldRules:()=>mt,FloatRules:()=>Me,Int32Rules:()=>G,Int64Rules:()=>v,ItemsRules:()=>re,MessageRules:()=>Xe,StringRules:()=>Le,StringRules_UnicodeNormalizationForm:()=>_e,Uint32Rules:()=>oe,Uint64Rules:()=>se});module.exports=Ke(dt);function g(t,e){if(!t)throw new Error(e)}var qe=34028234663852886e22,Ye=-34028234663852886e22,We=4294967295,Ze=2147483647,Qe=-2147483648;function E(t){if(typeof t!="number")throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>Ze||t<Qe)throw new Error("invalid int 32: "+t)}function B(t){if(typeof t!="number")throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>We||t<0)throw new Error("invalid uint 32: "+t)}function M(t){if(typeof t!="number")throw new Error("invalid float 32: "+typeof t);if(Number.isFinite(t)&&(t>qe||t<Ye))throw new Error("invalid float 32: "+t)}var ie=Symbol("@bufbuild/protobuf/enum-type");function ae(t){let e=t[ie];return g(e,"missing enum type on enum object"),e}function q(t,e,r,o){t[ie]=Y(e,r.map(n=>({no:n.no,name:n.name,localName:t[n.no]})),o)}function Y(t,e,r){let o=Object.create(null),n=Object.create(null),s=[];for(let i of e){let a=ue(i);s.push(a),o[i.name]=a,n[i.no]=a}return{typeName:t,values:s,findName(i){return o[i]},findNumber(i){return n[i]}}}function fe(t,e,r){let o={};for(let n of e){let s=ue(n);o[s.localName]=s.no,o[s.no]=s.localName}return q(o,t,e,r),o}function ue(t){return"localName"in t?t:Object.assign(Object.assign({},t),{localName:t.name})}var N=class{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,r){let o=this.getType(),n=o.runtime.bin,s=n.makeReadOptions(r);return n.readMessage(this,s.readerFactory(e),e.byteLength,s),this}fromJson(e,r){let o=this.getType(),n=o.runtime.json,s=n.makeReadOptions(r);return n.readMessage(o,e,s,this),this}fromJsonString(e,r){let o;try{o=JSON.parse(e)}catch(n){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${n instanceof Error?n.message:String(n)}`)}return this.fromJson(o,r)}toBinary(e){let r=this.getType(),o=r.runtime.bin,n=o.makeWriteOptions(e),s=n.writerFactory();return o.writeMessage(this,s,n),s.finish()}toJson(e){let r=this.getType(),o=r.runtime.json,n=o.makeWriteOptions(e);return o.writeMessage(this,n)}toJsonString(e){var r;let o=this.toJson(e);return JSON.stringify(o,null,(r=e==null?void 0:e.prettySpaces)!==null&&r!==void 0?r:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}};function ce(t,e,r,o){var n;let s=(n=o==null?void 0:o.localName)!==null&&n!==void 0?n:e.substring(e.lastIndexOf(".")+1),i={[s]:function(a){t.util.initFields(this),t.util.initPartial(a,this)}}[s];return Object.setPrototypeOf(i.prototype,new N),Object.assign(i,{runtime:t,typeName:e,fields:t.util.newFieldList(r),fromBinary(a,f){return new i().fromBinary(a,f)},fromJson(a,f){return new i().fromJson(a,f)},fromJsonString(a,f){return new i().fromJsonString(a,f)},equals(a,f){return t.util.equals(i,a,f)}}),i}function le(t,e,r,o){return{syntax:t,json:e,bin:r,util:o,makeMessageType(n,s,i){return ce(this,n,s,i)},makeEnum:fe,makeEnumType:Y,getEnumType:ae}}var u;(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})(u||(u={}));function de(){let t=0,e=0;for(let o=0;o<28;o+=7){let n=this.buf[this.pos++];if(t|=(n&127)<<o,!(n&128))return this.assertBounds(),[t,e]}let r=this.buf[this.pos++];if(t|=(r&15)<<28,e=(r&112)>>4,!(r&128))return this.assertBounds(),[t,e];for(let o=3;o<=31;o+=7){let n=this.buf[this.pos++];if(e|=(n&127)<<o,!(n&128))return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function $(t,e,r){for(let s=0;s<28;s=s+7){let i=t>>>s,a=!(!(i>>>7)&&e==0),f=(a?i|128:i)&255;if(r.push(f),!a)return}let o=t>>>28&15|(e&7)<<4,n=!!(e>>3);if(r.push((n?o|128:o)&255),!!n){for(let s=3;s<31;s=s+7){let i=e>>>s,a=!!(i>>>7),f=(a?i|128:i)&255;if(r.push(f),!a)return}r.push(e>>>31&1)}}var R=4294967296;function W(t){let e=t[0]==="-";e&&(t=t.slice(1));let r=1e6,o=0,n=0;function s(i,a){let f=Number(t.slice(i,a));n*=r,o=o*r+f,o>=R&&(n=n+(o/R|0),o=o%R)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),e?he(o,n):Q(o,n)}function pe(t,e){let r=Q(t,e),o=r.hi&2147483648;o&&(r=he(r.lo,r.hi));let n=Z(r.lo,r.hi);return o?"-"+n:n}function Z(t,e){if({lo:t,hi:e}=He(t,e),e<=2097151)return String(R*e+t);let r=t&16777215,o=(t>>>24|e<<8)&16777215,n=e>>16&65535,s=r+o*6777216+n*6710656,i=o+n*8147497,a=n*2,f=1e7;return s>=f&&(i+=Math.floor(s/f),s%=f),i>=f&&(a+=Math.floor(i/f),i%=f),a.toString()+me(i)+me(s)}function He(t,e){return{lo:t>>>0,hi:e>>>0}}function Q(t,e){return{lo:t|0,hi:e|0}}function he(t,e){return e=~e,t?t=~t+1:e+=1,Q(t,e)}var me=t=>{let e=String(t);return"0000000".slice(e.length)+e};function H(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let r=0;r<9;r++)e.push(t&127|128),t=t>>7;e.push(1)}}function ge(){let t=this.buf[this.pos++],e=t&127;if(!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,!(t&128))return this.assertBounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let r=5;t&128&&r<10;r++)t=this.buf[this.pos++];if(t&128)throw new Error("invalid varint");return this.assertBounds(),e>>>0}function et(){let t=new DataView(new ArrayBuffer(8));if(globalThis.BigInt!==void 0&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"&&(typeof process!="object"||typeof process.env!="object"||process.env.BUF_BIGINT_DISABLE!=="1")){let n=BigInt("-9223372036854775808"),s=BigInt("9223372036854775807"),i=BigInt("0"),a=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(f){let c=typeof f=="bigint"?f:BigInt(f);if(c>s||c<n)throw new Error(`int64 invalid: ${f}`);return c},uParse(f){let c=typeof f=="bigint"?f:BigInt(f);if(c>a||c<i)throw new Error(`uint64 invalid: ${f}`);return c},enc(f){return t.setBigInt64(0,this.parse(f),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},uEnc(f){return t.setBigInt64(0,this.uParse(f),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},dec(f,c){return t.setInt32(0,f,!0),t.setInt32(4,c,!0),t.getBigInt64(0,!0)},uDec(f,c){return t.setInt32(0,f,!0),t.setInt32(4,c,!0),t.getBigUint64(0,!0)}}}let r=n=>g(/^-?[0-9]+$/.test(n),`int64 invalid: ${n}`),o=n=>g(/^[0-9]+$/.test(n),`uint64 invalid: ${n}`);return{zero:"0",supported:!1,parse(n){return typeof n!="string"&&(n=n.toString()),r(n),n},uParse(n){return typeof n!="string"&&(n=n.toString()),o(n),n},enc(n){return typeof n!="string"&&(n=n.toString()),r(n),W(n)},uEnc(n){return typeof n!="string"&&(n=n.toString()),o(n),W(n)},dec(n,s){return pe(n,s)},uDec(n,s){return Z(n,s)}}}var b=et();var p;(function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"})(p||(p={}));var L=class{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let n=0;n<this.chunks.length;n++)e+=this.chunks[n].length;let r=new Uint8Array(e),o=0;for(let n=0;n<this.chunks.length;n++)r.set(this.chunks[n],o),o+=this.chunks[n].length;return this.chunks=[],r}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),r=this.stack.pop();if(!r)throw new Error("invalid state, fork stack empty");return this.chunks=r.chunks,this.buf=r.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,r){return this.uint32((e<<3|r)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(B(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return E(e),H(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let r=this.textEncoder.encode(e);return this.uint32(r.byteLength),this.raw(r)}float(e){M(e);let r=new Uint8Array(4);return new DataView(r.buffer).setFloat32(0,e,!0),this.raw(r)}double(e){let r=new Uint8Array(8);return new DataView(r.buffer).setFloat64(0,e,!0),this.raw(r)}fixed32(e){B(e);let r=new Uint8Array(4);return new DataView(r.buffer).setUint32(0,e,!0),this.raw(r)}sfixed32(e){E(e);let r=new Uint8Array(4);return new DataView(r.buffer).setInt32(0,e,!0),this.raw(r)}sint32(e){return E(e),e=(e<<1^e>>31)>>>0,H(e,this.buf),this}sfixed64(e){let r=new Uint8Array(8),o=new DataView(r.buffer),n=b.enc(e);return o.setInt32(0,n.lo,!0),o.setInt32(4,n.hi,!0),this.raw(r)}fixed64(e){let r=new Uint8Array(8),o=new DataView(r.buffer),n=b.uEnc(e);return o.setInt32(0,n.lo,!0),o.setInt32(4,n.hi,!0),this.raw(r)}int64(e){let r=b.enc(e);return $(r.lo,r.hi,this.buf),this}sint64(e){let r=b.enc(e),o=r.hi>>31,n=r.lo<<1^o,s=(r.hi<<1|r.lo>>>31)^o;return $(n,s,this.buf),this}uint64(e){let r=b.uEnc(e);return $(r.lo,r.hi,this.buf),this}},_=class{constructor(e,r){this.varint64=de,this.uint32=ge,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=r??new TextDecoder}tag(){let e=this.uint32(),r=e>>>3,o=e&7;if(r<=0||o<0||o>5)throw new Error("illegal tag: field no "+r+" wire type "+o);return[r,o]}skip(e){let r=this.pos;switch(e){case p.Varint:for(;this.buf[this.pos++]&128;);break;case p.Bit64:this.pos+=4;case p.Bit32:this.pos+=4;break;case p.LengthDelimited:let o=this.uint32();this.pos+=o;break;case p.StartGroup:let n;for(;(n=this.tag()[1])!==p.EndGroup;)this.skip(n);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(r,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return b.dec(...this.varint64())}uint64(){return b.uDec(...this.varint64())}sint64(){let[e,r]=this.varint64(),o=-(e&1);return e=(e>>>1|(r&1)<<31)^o,r=r>>>1^o,b.dec(e,r)}bool(){let[e,r]=this.varint64();return e!==0||r!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return b.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return b.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),r=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(r,r+e)}string(){return this.textDecoder.decode(this.bytes())}};function U(t,e){return e instanceof N||!t.fieldWrapper?e:t.fieldWrapper.wrapField(e)}var Rt={"google.protobuf.DoubleValue":u.DOUBLE,"google.protobuf.FloatValue":u.FLOAT,"google.protobuf.Int64Value":u.INT64,"google.protobuf.UInt64Value":u.UINT64,"google.protobuf.Int32Value":u.INT32,"google.protobuf.UInt32Value":u.UINT32,"google.protobuf.BoolValue":u.BOOL,"google.protobuf.StringValue":u.STRING,"google.protobuf.BytesValue":u.BYTES};function I(t,e,r){if(e===r)return!0;if(t==u.BYTES){if(!(e instanceof Uint8Array)||!(r instanceof Uint8Array)||e.length!==r.length)return!1;for(let o=0;o<e.length;o++)if(e[o]!==r[o])return!1;return!0}switch(t){case u.UINT64:case u.FIXED64:case u.INT64:case u.SFIXED64:case u.SINT64:return e==r}return!1}function D(t){switch(t){case u.BOOL:return!1;case u.UINT64:case u.FIXED64:case u.INT64:case u.SFIXED64:case u.SINT64:return b.zero;case u.DOUBLE:case u.FLOAT:return 0;case u.BYTES:return new Uint8Array(0);case u.STRING:return"";default:return 0}}function J(t,e){let r=e===void 0,o=p.Varint,n=e===0;switch(t){case u.STRING:n=r||!e.length,o=p.LengthDelimited;break;case u.BOOL:n=e===!1;break;case u.DOUBLE:o=p.Bit64;break;case u.FLOAT:o=p.Bit32;break;case u.INT64:n=r||e==0;break;case u.UINT64:n=r||e==0;break;case u.FIXED64:n=r||e==0,o=p.Bit64;break;case u.BYTES:n=r||!e.byteLength,o=p.LengthDelimited;break;case u.FIXED32:o=p.Bit32;break;case u.SFIXED32:o=p.Bit32;break;case u.SFIXED64:n=r||e==0,o=p.Bit64;break;case u.SINT64:n=r||e==0;break}let s=u[t].toLowerCase();return[o,s,r||n]}var O=Symbol("@bufbuild/protobuf/unknown-fields"),be={readUnknownFields:!0,readerFactory:t=>new _(t)},ke={writeUnknownFields:!0,writerFactory:()=>new L};function tt(t){return t?Object.assign(Object.assign({},be),t):be}function nt(t){return t?Object.assign(Object.assign({},ke),t):ke}function ye(){return{makeReadOptions:tt,makeWriteOptions:nt,listUnknownFields(t){var e;return(e=t[O])!==null&&e!==void 0?e:[]},discardUnknownFields(t){delete t[O]},writeUnknownFields(t,e){let o=t[O];if(o)for(let n of o)e.tag(n.no,n.wireType).raw(n.data)},onUnknownField(t,e,r,o){let n=t;Array.isArray(n[O])||(n[O]=[]),n[O].push({no:e,wireType:r,data:o})},readMessage(t,e,r,o){let n=t.getType(),s=r===void 0?e.len:e.pos+r;for(;e.pos<s;){let[i,a]=e.tag(),f=n.fields.find(i);if(!f){let h=e.skip(a);o.readUnknownFields&&this.onUnknownField(t,i,a,h);continue}let c=t,l=f.repeated,m=f.localName;switch(f.oneof&&(c=c[f.oneof.localName],c.case!=m&&delete c.value,c.case=m,m="value"),f.kind){case"scalar":case"enum":let h=f.kind=="enum"?u.INT32:f.T;if(l){let w=c[m];if(a==p.LengthDelimited&&h!=u.STRING&&h!=u.BYTES){let F=e.uint32()+e.pos;for(;e.pos<F;)w.push(V(e,h))}else w.push(V(e,h))}else c[m]=V(e,h);break;case"message":let d=f.T;l?c[m].push(d.fromBinary(e.bytes(),o)):c[m]instanceof N?c[m].fromBinary(e.bytes(),o):(c[m]=d.fromBinary(e.bytes(),o),d.fieldWrapper&&!f.oneof&&!f.repeated&&(c[m]=d.fieldWrapper.unwrapField(c[m])));break;case"map":let[y,T]=rt(f,e,o);c[m][y]=T;break}}}}}function rt(t,e,r){let o=e.uint32(),n=e.pos+o,s,i;for(;e.pos<n;){let[a]=e.tag();switch(a){case 1:s=V(e,t.K);break;case 2:switch(t.V.kind){case"scalar":i=V(e,t.V.T);break;case"enum":i=e.int32();break;case"message":i=t.V.T.fromBinary(e.bytes(),r);break}break}}if(s===void 0){let a=D(t.K);s=t.K==u.BOOL?a.toString():a}if(typeof s!="string"&&typeof s!="number"&&(s=s.toString()),i===void 0)switch(t.V.kind){case"scalar":i=D(t.V.T);break;case"enum":i=0;break;case"message":i=new t.V.T;break}return[s,i]}function V(t,e){let[,r]=J(e);return t[r]()}function Te(t,e,r,o,n){t.tag(r.no,p.LengthDelimited),t.fork();let s=o;switch(r.K){case u.INT32:case u.FIXED32:case u.UINT32:case u.SFIXED32:case u.SINT32:s=Number.parseInt(o);break;case u.BOOL:g(o=="true"||o=="false"),s=o=="true";break}switch(S(t,r.K,1,s,!0),r.V.kind){case"scalar":S(t,r.V.T,2,n,!0);break;case"enum":S(t,u.INT32,2,n,!0);break;case"message":P(t,e,r.V.T,2,n);break}t.join()}function P(t,e,r,o,n){if(n!==void 0){let s=U(r,n);t.tag(o,p.LengthDelimited).bytes(s.toBinary(e))}}function S(t,e,r,o,n){let[s,i,a]=J(e,o);(!a||n)&&t.tag(r,s)[i](o)}function we(t,e,r,o){if(!o.length)return;t.tag(r,p.LengthDelimited).fork();let[,n]=J(e);for(let s=0;s<o.length;s++)t[n](o[s]);t.join()}function Ne(){return Object.assign(Object.assign({},ye()),{writeMessage(t,e,r){let o=t.getType();for(let n of o.fields.byNumber()){let s,i=n.repeated,a=n.localName;if(n.oneof){let f=t[n.oneof.localName];if(f.case!==a)continue;s=f.value}else s=t[a];switch(n.kind){case"scalar":case"enum":let f=n.kind=="enum"?u.INT32:n.T;if(i)if(n.packed)we(e,f,n.no,s);else for(let c of s)S(e,f,n.no,c,!0);else s!==void 0&&S(e,f,n.no,s,!!n.oneof||n.opt);break;case"message":if(i)for(let c of s)P(e,r,n.T,n.no,c);else P(e,r,n.T,n.no,s);break;case"map":for(let[c,l]of Object.entries(s))Te(e,r,n,c,l);break}}return r.writeUnknownFields&&this.writeUnknownFields(t,e),e}})}var x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),X=[];for(let t=0;t<x.length;t++)X[x[t].charCodeAt(0)]=t;X["-".charCodeAt(0)]=x.indexOf("+");X["_".charCodeAt(0)]=x.indexOf("/");var ee={dec(t){let e=t.length*3/4;t[t.length-2]=="="?e-=2:t[t.length-1]=="="&&(e-=1);let r=new Uint8Array(e),o=0,n=0,s,i=0;for(let a=0;a<t.length;a++){if(s=X[t.charCodeAt(a)],s===void 0)switch(t[a]){case"=":n=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(n){case 0:i=s,n=1;break;case 1:r[o++]=i<<2|(s&48)>>4,i=s,n=2;break;case 2:r[o++]=(i&15)<<4|(s&60)>>2,i=s,n=3;break;case 3:r[o++]=(i&3)<<6|s,n=0;break}}if(n==1)throw Error("invalid base64 string.");return r.subarray(0,o)},enc(t){let e="",r=0,o,n=0;for(let s=0;s<t.length;s++)switch(o=t[s],r){case 0:e+=x[o>>2],n=(o&3)<<4,r=1;break;case 1:e+=x[n|o>>4],n=(o&15)<<2,r=2;break;case 2:e+=x[n|o>>6],e+=x[o&63],r=0;break}return r&&(e+=x[n],e+="=",r==1&&(e+="=")),e}};var Ie={ignoreUnknownFields:!1},xe={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function ot(t){return t?Object.assign(Object.assign({},Ie),t):Ie}function st(t){return t?Object.assign(Object.assign({},xe),t):xe}function Ee(t){let e=t(it,Fe);return{makeReadOptions:ot,makeWriteOptions:st,readMessage(r,o,n,s){if(o==null||Array.isArray(o)||typeof o!="object")throw new Error(`cannot decode message ${r.typeName} from JSON: ${this.debug(o)}`);s=s??new r;let i={};for(let[a,f]of Object.entries(o)){let c=r.fields.findJsonName(a);if(!c){if(!n.ignoreUnknownFields)throw new Error(`cannot decode message ${r.typeName} from JSON: key "${a}" is unknown`);continue}let l=c.localName,m=s;if(c.oneof){if(f===null&&c.kind=="scalar")continue;let h=i[c.oneof.localName];if(h)throw new Error(`cannot decode message ${r.typeName} from JSON: multiple keys for oneof "${c.oneof.name}" present: "${h}", "${a}"`);i[c.oneof.localName]=a,m=m[c.oneof.localName]={case:l},l="value"}if(c.repeated){if(f===null)continue;if(!Array.isArray(f))throw new Error(`cannot decode field ${r.typeName}.${c.name} from JSON: ${this.debug(f)}`);let h=m[l];for(let d of f){if(d===null)throw new Error(`cannot decode field ${r.typeName}.${c.name} from JSON: ${this.debug(d)}`);let y;switch(c.kind){case"message":y=c.T.fromJson(d,n);break;case"enum":if(y=te(c.T,d,n.ignoreUnknownFields),y===void 0)continue;break;case"scalar":try{y=A(c.T,d)}catch(T){let w=`cannot decode field ${r.typeName}.${c.name} from JSON: ${this.debug(d)}`;throw T instanceof Error&&T.message.length>0&&(w+=`: ${T.message}`),new Error(w)}break}h.push(y)}}else if(c.kind=="map"){if(f===null)continue;if(Array.isArray(f)||typeof f!="object")throw new Error(`cannot decode field ${r.typeName}.${c.name} from JSON: ${this.debug(f)}`);let h=m[l];for(let[d,y]of Object.entries(f)){if(y===null)throw new Error(`cannot decode field ${r.typeName}.${c.name} from JSON: map value null`);let T;switch(c.V.kind){case"message":T=c.V.T.fromJson(y,n);break;case"enum":if(T=te(c.V.T,y,n.ignoreUnknownFields),T===void 0)continue;break;case"scalar":try{T=A(c.V.T,y)}catch(w){let F=`cannot decode map value for field ${r.typeName}.${c.name} from JSON: ${this.debug(f)}`;throw w instanceof Error&&w.message.length>0&&(F+=`: ${w.message}`),new Error(F)}break}try{h[A(c.K,c.K==u.BOOL?d=="true"?!0:d=="false"?!1:d:d).toString()]=T}catch(w){let F=`cannot decode map key for field ${r.typeName}.${c.name} from JSON: ${this.debug(f)}`;throw w instanceof Error&&w.message.length>0&&(F+=`: ${w.message}`),new Error(F)}}}else switch(c.kind){case"message":let h=c.T;if(f===null&&h.typeName!="google.protobuf.Value"){if(c.oneof)throw new Error(`cannot decode field ${r.typeName}.${c.name} from JSON: null is invalid for oneof field "${a}"`);continue}m[l]instanceof N?m[l].fromJson(f,n):(m[l]=h.fromJson(f,n),h.fieldWrapper&&!c.oneof&&(m[l]=h.fieldWrapper.unwrapField(m[l])));break;case"enum":let d=te(c.T,f,n.ignoreUnknownFields);d!==void 0&&(m[l]=d);break;case"scalar":try{m[l]=A(c.T,f)}catch(y){let T=`cannot decode field ${r.typeName}.${c.name} from JSON: ${this.debug(f)}`;throw y instanceof Error&&y.message.length>0&&(T+=`: ${y.message}`),new Error(T)}break}}return s},writeMessage(r,o){let n=r.getType(),s={},i;try{for(let a of n.fields.byMember()){let f;if(a.kind=="oneof"){let c=r[a.localName];if(c.value===void 0)continue;if(i=a.findField(c.case),!i)throw"oneof case not found: "+c.case;f=e(i,c.value,o)}else i=a,f=e(i,r[i.localName],o);f!==void 0&&(s[o.useProtoFieldName?i.name:i.jsonName]=f)}}catch(a){let f=i?`cannot encode field ${n.typeName}.${i.name} to JSON`:`cannot encode message ${n.typeName} to JSON`,c=a instanceof Error?a.message:String(a);throw new Error(f+(c.length>0?`: ${c}`:""))}return s},readScalar:A,writeScalar:Fe,debug:Oe}}function Oe(t){if(t===null)return"null";switch(typeof t){case"object":return Array.isArray(t)?"array":"object";case"string":return t.length>100?"string":`"${t.split('"').join('\\"')}"`;default:return t.toString()}}function A(t,e){switch(t){case u.DOUBLE:case u.FLOAT:if(e===null)return 0;if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;let r=Number(e);if(Number.isNaN(r)||!Number.isFinite(r))break;return t==u.FLOAT&&M(r),r;case u.INT32:case u.FIXED32:case u.SFIXED32:case u.SINT32:case u.UINT32:if(e===null)return 0;let o;if(typeof e=="number"?o=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(o=Number(e)),o===void 0)break;return t==u.UINT32?B(o):E(o),o;case u.INT64:case u.SFIXED64:case u.SINT64:if(e===null)return b.zero;if(typeof e!="number"&&typeof e!="string")break;return b.parse(e);case u.FIXED64:case u.UINT64:if(e===null)return b.zero;if(typeof e!="number"&&typeof e!="string")break;return b.uParse(e);case u.BOOL:if(e===null)return!1;if(typeof e!="boolean")break;return e;case u.STRING:if(e===null)return"";if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case u.BYTES:if(e===null||e==="")return new Uint8Array(0);if(typeof e!="string")break;return ee.dec(e)}throw new Error}function te(t,e,r){if(e===null)return 0;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":let o=t.findName(e);if(o||r)return o==null?void 0:o.no;break}throw new Error(`cannot decode enum ${t.typeName} from JSON: ${Oe(e)}`)}function it(t,e,r,o){var n;if(e===void 0)return e;if(e===0&&!r)return;if(o)return e;if(t.typeName=="google.protobuf.NullValue")return null;let s=t.findNumber(e);return(n=s==null?void 0:s.name)!==null&&n!==void 0?n:e}function Fe(t,e,r){if(e!==void 0)switch(t){case u.INT32:case u.SFIXED32:case u.SINT32:case u.FIXED32:case u.UINT32:return g(typeof e=="number"),e!=0||r?e:void 0;case u.FLOAT:case u.DOUBLE:return g(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e!==0||r?e:void 0;case u.STRING:return g(typeof e=="string"),e.length>0||r?e:void 0;case u.BOOL:return g(typeof e=="boolean"),e||r?e:void 0;case u.UINT64:case u.FIXED64:case u.INT64:case u.SFIXED64:case u.SINT64:return g(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),r||e!=0?e.toString(10):void 0;case u.BYTES:return g(e instanceof Uint8Array),r||e.byteLength>0?ee.enc(e):void 0}}function Se(){return Ee((t,e)=>function(o,n,s){if(o.kind=="map"){let i={};switch(o.V.kind){case"scalar":for(let[f,c]of Object.entries(n)){let l=e(o.V.T,c,!0);g(l!==void 0),i[f.toString()]=l}break;case"message":for(let[f,c]of Object.entries(n))i[f.toString()]=c.toJson(s);break;case"enum":let a=o.V.T;for(let[f,c]of Object.entries(n)){g(c===void 0||typeof c=="number");let l=t(a,c,!0,s.enumAsInteger);g(l!==void 0),i[f.toString()]=l}break}return s.emitDefaultValues||Object.keys(i).length>0?i:void 0}else if(o.repeated){let i=[];switch(o.kind){case"scalar":for(let a=0;a<n.length;a++)i.push(e(o.T,n[a],!0));break;case"enum":for(let a=0;a<n.length;a++)i.push(t(o.T,n[a],!0,s.enumAsInteger));break;case"message":for(let a=0;a<n.length;a++)i.push(U(o.T,n[a]).toJson(s));break}return s.emitDefaultValues||i.length>0?i:void 0}else switch(o.kind){case"scalar":return e(o.T,n,!!o.oneof||o.opt||s.emitDefaultValues);case"enum":return t(o.T,n,!!o.oneof||o.opt||s.emitDefaultValues,s.enumAsInteger);case"message":return n!==void 0?U(o.T,n).toJson(s):void 0}})}function Be(){return{setEnumType:q,initPartial(t,e){if(t===void 0)return;let r=e.getType();for(let o of r.fields.byMember()){let n=o.localName,s=e,i=t;if(i[n]!==void 0)switch(o.kind){case"oneof":let a=i[n].case;if(a===void 0)continue;let f=o.findField(a),c=i[n].value;f&&f.kind=="message"&&!(c instanceof f.T)&&(c=new f.T(c)),s[n]={case:a,value:c};break;case"scalar":case"enum":s[n]=i[n];break;case"map":switch(o.V.kind){case"scalar":case"enum":Object.assign(s[n],i[n]);break;case"message":let m=o.V.T;for(let h of Object.keys(i[n])){let d=i[n][h];m.fieldWrapper||(d=new m(d)),s[n][h]=d}break}break;case"message":let l=o.T;if(o.repeated)s[n]=i[n].map(m=>m instanceof l?m:new l(m));else if(i[n]!==void 0){let m=i[n];l.fieldWrapper?s[n]=m:s[n]=m instanceof l?m:new l(m)}break}}},equals(t,e,r){return e===r?!0:!e||!r?!1:t.fields.byMember().every(o=>{let n=e[o.localName],s=r[o.localName];if(o.repeated){if(n.length!==s.length)return!1;switch(o.kind){case"message":return n.every((i,a)=>o.T.equals(i,s[a]));case"scalar":return n.every((i,a)=>I(o.T,i,s[a]));case"enum":return n.every((i,a)=>I(u.INT32,i,s[a]))}throw new Error(`repeated cannot contain ${o.kind}`)}switch(o.kind){case"message":return o.T.equals(n,s);case"enum":return I(u.INT32,n,s);case"scalar":return I(o.T,n,s);case"oneof":if(n.case!==s.case)return!1;let i=o.findField(n.case);if(i===void 0)return!0;switch(i.kind){case"message":return i.T.equals(n.value,s.value);case"enum":return I(u.INT32,n.value,s.value);case"scalar":return I(i.T,n.value,s.value)}throw new Error(`oneof cannot contain ${i.kind}`);case"map":let a=Object.keys(n).concat(Object.keys(s));switch(o.V.kind){case"message":let f=o.V.T;return a.every(l=>f.equals(n[l],s[l]));case"enum":return a.every(l=>I(u.INT32,n[l],s[l]));case"scalar":let c=o.V.T;return a.every(l=>I(c,n[l],s[l]))}break}})},clone(t){let e=t.getType(),r=new e,o=r;for(let n of e.fields.byMember()){let s=t[n.localName],i;if(n.repeated)i=s.map(a=>z(n,a));else if(n.kind=="map"){i=o[n.localName];for(let[a,f]of Object.entries(s))i[a]=z(n.V,f)}else if(n.kind=="oneof"){let a=n.findField(s.case);i=a?{case:s.case,value:z(a,s.value)}:{case:void 0}}else i=z(n,s);o[n.localName]=i}return r}}}function z(t,e){if(e===void 0)return e;if(e instanceof N)return e.clone();if(e instanceof Uint8Array){let r=new Uint8Array(e.byteLength);return r.set(e),r}return e}var C=class{constructor(e,r){this._fields=e,this._normalizer=r}findJsonName(e){if(!this.jsonNames){let r={};for(let o of this.list())r[o.jsonName]=r[o.name]=o;this.jsonNames=r}return this.jsonNames[e]}find(e){if(!this.numbers){let r={};for(let o of this.list())r[o.no]=o;this.numbers=r}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,r)=>e.no-r.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];let e=this.members,r;for(let o of this.list())o.oneof?o.oneof!==r&&(r=o.oneof,e.push(r)):e.push(o)}return this.members}};function ne(t,e){let r=Ve(t);return e?r:ct(ut(r))}function Ue(t){return ne(t,!1)}var De=Ve;function Ve(t){let e=!1,r=[];for(let o=0;o<t.length;o++){let n=t.charAt(o);switch(n){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":r.push(n),e=!1;break;default:e&&(e=!1,n=n.toUpperCase()),r.push(n);break}}return r.join("")}var at=new Set(["constructor","toString","toJSON","valueOf"]),ft=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),Ae=t=>`${t}$`,ut=t=>ft.has(t)?Ae(t):t,ct=t=>at.has(t)?Ae(t):t;var j=class{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=Ue(e)}addField(e){g(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let r=0;r<this.fields.length;r++)this._lookup[this.fields[r].localName]=this.fields[r]}return this._lookup[e]}};var k=le("proto3",Se(),Ne(),Object.assign(Object.assign({},Be()),{newFieldList(t){return new C(t,lt)},initFields(t){for(let e of t.getType().fields.byMember()){if(e.opt)continue;let r=e.localName,o=t;if(e.repeated){o[r]=[];continue}switch(e.kind){case"oneof":o[r]={case:void 0};break;case"enum":o[r]=0;break;case"map":o[r]={};break;case"scalar":o[r]=D(e.T);break;case"message":break}}}}));function lt(t){var e,r,o;let n=[],s;for(let i of typeof t=="function"?t():t){let a=i;if(a.localName=ne(i.name,i.oneof!==void 0),a.jsonName=(e=i.jsonName)!==null&&e!==void 0?e:De(i.name),a.repeated=(r=i.repeated)!==null&&r!==void 0?r:!1,a.packed=(o=i.packed)!==null&&o!==void 0?o:i.kind=="enum"||i.kind=="scalar"&&i.T!=u.BYTES&&i.T!=u.STRING,i.oneof!==void 0){let f=typeof i.oneof=="string"?i.oneof:i.oneof.name;(!s||s.name!=f)&&(s=new j(f)),a.oneof=s,s.addField(a)}n.push(a)}return n}var mt=k.makeMessageType("cybozu.validate.FieldRules",()=>[{no:1,name:"float",kind:"message",T:Me,oneof:"type"},{no:2,name:"double",kind:"message",T:Re,oneof:"type"},{no:3,name:"int32",kind:"message",T:G,oneof:"type"},{no:4,name:"int64",kind:"message",T:v,oneof:"type"},{no:5,name:"uint32",kind:"message",T:oe,oneof:"type"},{no:6,name:"uint64",kind:"message",T:se,oneof:"type"},{no:7,name:"sint32",kind:"message",T:G,oneof:"type"},{no:8,name:"sint64",kind:"message",T:v,oneof:"type"},{no:9,name:"fixed32",kind:"message",T:oe,oneof:"type"},{no:10,name:"fixed64",kind:"message",T:se,oneof:"type"},{no:11,name:"sfixed32",kind:"message",T:G,oneof:"type"},{no:12,name:"sfixed64",kind:"message",T:v,oneof:"type"},{no:13,name:"bool",kind:"message",T:$e,oneof:"type"},{no:14,name:"string",kind:"message",T:Le,oneof:"type"},{no:15,name:"bytes",kind:"message",T:Je,oneof:"type"},{no:16,name:"enum",kind:"message",T:Pe,oneof:"type"},{no:17,name:"message",kind:"message",T:Xe,oneof:"type"},{no:1e3,name:"repeated",kind:"message",T:re,oneof:"items"},{no:1001,name:"map",kind:"message",T:re,oneof:"items"}]),re=k.makeMessageType("cybozu.validate.ItemsRules",()=>[{no:1,name:"min_items",kind:"scalar",T:13,opt:!0},{no:2,name:"max_items",kind:"scalar",T:13,opt:!0}]),Me=k.makeMessageType("cybozu.validate.FloatRules",()=>[{no:1,name:"lt",kind:"scalar",T:2,opt:!0},{no:2,name:"lte",kind:"scalar",T:2,opt:!0},{no:3,name:"gt",kind:"scalar",T:2,opt:!0},{no:4,name:"gte",kind:"scalar",T:2,opt:!0}]),Re=k.makeMessageType("cybozu.validate.DoubleRules",()=>[{no:1,name:"lt",kind:"scalar",T:1,opt:!0},{no:2,name:"lte",kind:"scalar",T:1,opt:!0},{no:3,name:"gt",kind:"scalar",T:1,opt:!0},{no:4,name:"gte",kind:"scalar",T:1,opt:!0}]),G=k.makeMessageType("cybozu.validate.Int32Rules",()=>[{no:1,name:"lt",kind:"scalar",T:5,opt:!0},{no:2,name:"lte",kind:"scalar",T:5,opt:!0},{no:3,name:"gt",kind:"scalar",T:5,opt:!0},{no:4,name:"gte",kind:"scalar",T:5,opt:!0}]),v=k.makeMessageType("cybozu.validate.Int64Rules",()=>[{no:1,name:"lt",kind:"scalar",T:3,opt:!0},{no:2,name:"lte",kind:"scalar",T:3,opt:!0},{no:3,name:"gt",kind:"scalar",T:3,opt:!0},{no:4,name:"gte",kind:"scalar",T:3,opt:!0}]),oe=k.makeMessageType("cybozu.validate.Uint32Rules",()=>[{no:1,name:"lt",kind:"scalar",T:13,opt:!0},{no:2,name:"lte",kind:"scalar",T:13,opt:!0},{no:3,name:"gt",kind:"scalar",T:13,opt:!0},{no:4,name:"gte",kind:"scalar",T:13,opt:!0}]),se=k.makeMessageType("cybozu.validate.Uint64Rules",()=>[{no:1,name:"lt",kind:"scalar",T:4,opt:!0},{no:2,name:"lte",kind:"scalar",T:4,opt:!0},{no:3,name:"gt",kind:"scalar",T:4,opt:!0},{no:4,name:"gte",kind:"scalar",T:4,opt:!0}]),$e=k.makeMessageType("cybozu.validate.BoolRules",[]),Le=k.makeMessageType("cybozu.validate.StringRules",()=>[{no:1,name:"norm",kind:"enum",T:k.getEnumType(_e)},{no:2,name:"ignore_empty",kind:"scalar",T:8},{no:3,name:"min_length",kind:"scalar",T:13,opt:!0},{no:4,name:"max_length",kind:"scalar",T:13,opt:!0},{no:5,name:"regex",kind:"scalar",T:9,opt:!0},{no:100,name:"email",kind:"scalar",T:8,oneof:"predefined"},{no:101,name:"uri",kind:"scalar",T:8,oneof:"predefined"},{no:102,name:"e164",kind:"scalar",T:8,oneof:"predefined"}]),_e=k.makeEnum("cybozu.validate.StringRules.UnicodeNormalizationForm",[{no:0,name:"NFC"},{no:1,name:"NFD"},{no:2,name:"NFKC"},{no:3,name:"NFKD"},{no:100,name:"PRECIS_USERNAME_CASE_MAPPED"},{no:101,name:"PRECIS_USERNAME_CASE_PRESERVED"},{no:102,name:"PRECIS_OPAQUE_STRING"}]),Je=k.makeMessageType("cybozu.validate.BytesRules",()=>[{no:3,name:"min_length",kind:"scalar",T:13,opt:!0},{no:4,name:"max_length",kind:"scalar",T:13,opt:!0}]),Pe=k.makeMessageType("cybozu.validate.EnumRules",()=>[{no:1,name:"required",kind:"scalar",T:8},{no:2,name:"defined_only",kind:"scalar",T:8}]),Xe=k.makeMessageType("cybozu.validate.MessageRules",()=>[{no:1,name:"required",kind:"scalar",T:8}]);0&&(module.exports={BoolRules,BytesRules,DoubleRules,EnumRules,FieldRules,FloatRules,Int32Rules,Int64Rules,ItemsRules,MessageRules,StringRules,StringRules_UnicodeNormalizationForm,Uint32Rules,Uint64Rules});
